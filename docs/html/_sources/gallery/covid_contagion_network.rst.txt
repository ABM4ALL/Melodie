.. _covid_contagion_network:

CovidContagionNetwork
=====================

This example extends the base ``covid_contagion`` model by introducing Melodie's **Network** module, demonstrating how to simulate infection spreading through a social network.

Network: Project Structure
--------------------------

.. code-block:: text

    examples/covid_contagion_network
    ├── core/
    │   ├── agent.py            # NetworkAgent (inherits from NetworkAgent)
    │   ├── environment.py      # Handles infection propagation through network edges
    │   ├── model.py            # Initializes the network and agent connections
    │   ├── scenario.py         # Defines network topology parameters
    │   └── ...
    ├── data/
    │   ├── input/
    │   │   ├── SimulatorScenarios.csv      # Defines network type and params (k, p, m)
    │   │   └── ID_HealthState.csv
    │   └── output/
    └── main.py

Network: Key Changes
--------------------

1. **Network Agents (``NetworkAgent``)**:
   Agents inherit from ``NetworkAgent``, which provides them with a ``network`` attribute to access the network structure.

2. **Network Structure**:
   The ``CovidModel`` now creates a ``Network`` object. This example supports two types of networks generated by NetworkX:
   - **Watts-Strogatz (Small-World)**: Characterized by dense local clusters and short average path lengths.
   - **Barabási-Albert (Scale-Free)**: Characterized by a few highly connected "hub" nodes.
   The network type and its corresponding parameters (e.g., `k` and `p` for Watts-Strogatz) are defined in ``SimulatorScenarios.csv``.

3. **Network Infection**:
   Infection spreads through the network connections. An infected agent can only infect its direct neighbors in the network graph.

Network: Input Data
-------------------

The ``CovidScenario`` class is updated to handle network parameters:

- **Network Type**: The ``network_type`` column in ``SimulatorScenarios.csv`` specifies whether to use "watts_strogatz" or "barabasi_albert".
- **Network Parameters**: Columns like ``network_param_k``, ``network_param_p``, and ``network_param_m`` provide the necessary parameters for the chosen network generation algorithm.

Network: Running the Model
--------------------------

Run the model using the provided entry script:

.. code-block:: bash

   python examples/covid_contagion_network/main.py

This will generate ``Result_Simulator_Agents.csv`` and ``Result_Simulator_Environment.csv`` in the ``data/output`` folder.

Network: Code
-------------

This section shows the key code implementation for the network model.

Model
~~~~~
Defined in ``core/model.py``.

.. literalinclude:: ../../../examples/covid_contagion_network/core/model.py
   :language: python
   :linenos:

Environment
~~~~~~~~~~~
Defined in ``core/environment.py``.

.. literalinclude:: ../../../examples/covid_contagion_network/core/environment.py
   :language: python
   :linenos:

Agent
~~~~~
Defined in ``core/agent.py``.

.. literalinclude:: ../../../examples/covid_contagion_network/core/agent.py
   :language: python
   :linenos:

Scenario
~~~~~~~~
Defined in ``core/scenario.py``.

.. literalinclude:: ../../../examples/covid_contagion_network/core/scenario.py
   :language: python
   :linenos:

Data Collector
~~~~~~~~~~~~~~
Defined in ``core/data_collector.py``.

.. literalinclude:: ../../../examples/covid_contagion_network/core/data_collector.py
   :language: python
   :linenos: