

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial &mdash; Melodie 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=fc837d61"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Framework Comparison" href="framework_comparison.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Melodie
              <img src="_static/logo.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#user-installation">User Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#developer-installation">Developer Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#dependency-note">Dependency Note</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#agent-based-model-abm">Agent-based Model (ABM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#melodie-framework">Melodie Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#the-model">The Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#the-scenario">The Scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#modelling-manager">Modelling Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#infrastructure">Infrastructure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#model">Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scenario-definition">Scenario Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-logic">Environment Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="#agent-behavior">Agent Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-collection-setup">Data Collection Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-the-model">Run the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parallel-execution">Parallel Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="framework_comparison.html">Framework Comparison</a><ul>
<li class="toctree-l2"><a class="reference internal" href="framework_comparison.html#project-structure">Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="framework_comparison.html#high-level-comparison">High-Level Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="framework_comparison.html#a-note-on-this-comparison">A Note on This Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="framework_comparison.html#advanced-features-in-melodie">Advanced Features in Melodie</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gallery/_index.html">Model Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gallery/covid_contagion_grid.html">CovidContagionGrid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid.html#grid-project-structure">Grid: Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid.html#grid-key-changes">Grid: Key Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid.html#grid-input-data">Grid: Input Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid.html#grid-running-the-model">Grid: Running the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid.html#grid-code">Grid: Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid.html#model-structure">Model Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid.html#environment-logic">Environment Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid.html#agent-behavior">Agent Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid.html#data-collection-setup">Data Collection Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid.html#grid-and-spot-definition">Grid and Spot Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html">CovidContagionGridVisual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#visualizer-project-structure">Visualizer: Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#visualizer-key-changes">Visualizer: Key Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#visualizer-running-the-model">Visualizer: Running the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#visualizer-customization-guide">Visualizer: Customization Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#visualizer-code">Visualizer: Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#visualizer-definition">Visualizer Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#model-structure">Model Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#environment-logic">Environment Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#agent-behavior">Agent Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_grid_visual.html#grid-definition">Grid Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gallery/covid_contagion_network.html">CovidContagionNetwork</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_network.html#network-project-structure">Network: Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_network.html#network-key-changes">Network: Key Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_network.html#network-input-data">Network: Input Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_network.html#network-running-the-model">Network: Running the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_network.html#network-code">Network: Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_network.html#model-structure">Model Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_network.html#environment-logic">Environment Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_network.html#agent-behavior">Agent Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_network.html#scenario-definition">Scenario Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_network.html#data-collection-setup">Data Collection Setup</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gallery/covid_contagion_calibrator.html">CovidContagionCalibrator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-project-structure">Calibrator: Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-key-changes">Calibrator: Key Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-ga-concepts">Calibrator: GA Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-input-data">Calibrator: Input Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-running-the-model">Calibrator: Running the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-code">Calibrator: Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#calibrator-definition">Calibrator Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#scenario-definition">Scenario Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#model-structure">Model Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#environment-logic">Environment Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#agent-behavior">Agent Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/covid_contagion_calibrator.html#data-collection-setup">Data Collection Setup</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html">RockPaperScissorsTrainer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-project-structure">Trainer: Project Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-ga-concepts">Trainer: GA Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-how-it-works">Trainer: How It Works</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-results">Trainer: Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-running-the-model">Trainer: Running the Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-code">Trainer: Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#model-structure">Model Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#environment-logic">Environment Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#agent-behavior">Agent Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#data-collection-setup">Data Collection Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#scenario-definition">Scenario Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="gallery/rock_paper_scissors_trainer.html#trainer-definition">Trainer Definition</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/simulator.html">Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/simulator.html#Melodie.Simulator"><code class="docutils literal notranslate"><span class="pre">Simulator</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.generate_scenarios"><code class="docutils literal notranslate"><span class="pre">Simulator.generate_scenarios()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.run_model"><code class="docutils literal notranslate"><span class="pre">Simulator.run_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.setup"><code class="docutils literal notranslate"><span class="pre">Simulator.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.run"><code class="docutils literal notranslate"><span class="pre">Simulator.run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.run_visual"><code class="docutils literal notranslate"><span class="pre">Simulator.run_visual()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.run_parallel"><code class="docutils literal notranslate"><span class="pre">Simulator.run_parallel()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/simulator.html#Melodie.Simulator.run_parallel_multithread"><code class="docutils literal notranslate"><span class="pre">Simulator.run_parallel_multithread()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/model.html">Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/model.html#Melodie.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create"><code class="docutils literal notranslate"><span class="pre">Model.create()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.setup"><code class="docutils literal notranslate"><span class="pre">Model.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_db_conn"><code class="docutils literal notranslate"><span class="pre">Model.create_db_conn()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_agent_list"><code class="docutils literal notranslate"><span class="pre">Model.create_agent_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_environment"><code class="docutils literal notranslate"><span class="pre">Model.create_environment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_grid"><code class="docutils literal notranslate"><span class="pre">Model.create_grid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_network"><code class="docutils literal notranslate"><span class="pre">Model.create_network()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_data_collector"><code class="docutils literal notranslate"><span class="pre">Model.create_data_collector()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.create_agent_container"><code class="docutils literal notranslate"><span class="pre">Model.create_agent_container()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.run"><code class="docutils literal notranslate"><span class="pre">Model.run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.iterator"><code class="docutils literal notranslate"><span class="pre">Model.iterator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/model.html#Melodie.Model.init_visualize"><code class="docutils literal notranslate"><span class="pre">Model.init_visualize()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/scenario.html">Scenario</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/scenario.html#Melodie.Scenario"><code class="docutils literal notranslate"><span class="pre">Scenario</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.copy"><code class="docutils literal notranslate"><span class="pre">Scenario.copy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.load_data"><code class="docutils literal notranslate"><span class="pre">Scenario.load_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.setup_data"><code class="docutils literal notranslate"><span class="pre">Scenario.setup_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.initialize"><code class="docutils literal notranslate"><span class="pre">Scenario.initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.setup"><code class="docutils literal notranslate"><span class="pre">Scenario.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.load_dataframe"><code class="docutils literal notranslate"><span class="pre">Scenario.load_dataframe()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.load_matrix"><code class="docutils literal notranslate"><span class="pre">Scenario.load_matrix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.to_dict"><code class="docutils literal notranslate"><span class="pre">Scenario.to_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.to_json"><code class="docutils literal notranslate"><span class="pre">Scenario.to_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.get_dataframe"><code class="docutils literal notranslate"><span class="pre">Scenario.get_dataframe()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/scenario.html#Melodie.Scenario.get_matrix"><code class="docutils literal notranslate"><span class="pre">Scenario.get_matrix()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/environment.html">Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/environment.html#Melodie.Environment"><code class="docutils literal notranslate"><span class="pre">Environment</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/environment.html#Melodie.Environment.setup"><code class="docutils literal notranslate"><span class="pre">Environment.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/environment.html#Melodie.Environment.to_dict"><code class="docutils literal notranslate"><span class="pre">Environment.to_dict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/agent.html">Agent</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/agent.html#Melodie.Agent"><code class="docutils literal notranslate"><span class="pre">Agent</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/agent.html#Melodie.Agent.setup"><code class="docutils literal notranslate"><span class="pre">Agent.setup()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/agent_list.html">Agent List</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList"><code class="docutils literal notranslate"><span class="pre">AgentList</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.setup_agents"><code class="docutils literal notranslate"><span class="pre">AgentList.setup_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.setup"><code class="docutils literal notranslate"><span class="pre">AgentList.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.init_agents"><code class="docutils literal notranslate"><span class="pre">AgentList.init_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.random_sample"><code class="docutils literal notranslate"><span class="pre">AgentList.random_sample()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.filter"><code class="docutils literal notranslate"><span class="pre">AgentList.filter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.add"><code class="docutils literal notranslate"><span class="pre">AgentList.add()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.to_list"><code class="docutils literal notranslate"><span class="pre">AgentList.to_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.to_dataframe"><code class="docutils literal notranslate"><span class="pre">AgentList.to_dataframe()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.set_properties"><code class="docutils literal notranslate"><span class="pre">AgentList.set_properties()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.get_agent"><code class="docutils literal notranslate"><span class="pre">AgentList.get_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.method_foreach"><code class="docutils literal notranslate"><span class="pre">AgentList.method_foreach()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.vectorize"><code class="docutils literal notranslate"><span class="pre">AgentList.vectorize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/agent_list.html#Melodie.AgentList.remove"><code class="docutils literal notranslate"><span class="pre">AgentList.remove()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/data_collector.html">Data Collector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector"><code class="docutils literal notranslate"><span class="pre">DataCollector</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.setup"><code class="docutils literal notranslate"><span class="pre">DataCollector.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.time_elapsed"><code class="docutils literal notranslate"><span class="pre">DataCollector.time_elapsed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.add_agent_property"><code class="docutils literal notranslate"><span class="pre">DataCollector.add_agent_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.add_environment_property"><code class="docutils literal notranslate"><span class="pre">DataCollector.add_environment_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.add_custom_collector"><code class="docutils literal notranslate"><span class="pre">DataCollector.add_custom_collector()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.env_property_names"><code class="docutils literal notranslate"><span class="pre">DataCollector.env_property_names()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.agent_property_names"><code class="docutils literal notranslate"><span class="pre">DataCollector.agent_property_names()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.agent_containers"><code class="docutils literal notranslate"><span class="pre">DataCollector.agent_containers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.collect_agent_properties"><code class="docutils literal notranslate"><span class="pre">DataCollector.collect_agent_properties()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.collect_custom_properties"><code class="docutils literal notranslate"><span class="pre">DataCollector.collect_custom_properties()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.collect_single_custom_property"><code class="docutils literal notranslate"><span class="pre">DataCollector.collect_single_custom_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.append_agent_properties_by_records"><code class="docutils literal notranslate"><span class="pre">DataCollector.append_agent_properties_by_records()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.append_environment_properties"><code class="docutils literal notranslate"><span class="pre">DataCollector.append_environment_properties()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.status"><code class="docutils literal notranslate"><span class="pre">DataCollector.status</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.collect"><code class="docutils literal notranslate"><span class="pre">DataCollector.collect()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.calc_time"><code class="docutils literal notranslate"><span class="pre">DataCollector.calc_time()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.get_single_agent_data"><code class="docutils literal notranslate"><span class="pre">DataCollector.get_single_agent_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.save"><code class="docutils literal notranslate"><span class="pre">DataCollector.save()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/data_collector.html#Melodie.DataCollector.save_dataframe"><code class="docutils literal notranslate"><span class="pre">DataCollector.save_dataframe()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/grid.html">Grid &amp; Spot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/grid.html#Melodie.Grid"><code class="docutils literal notranslate"><span class="pre">Grid</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.init_grid"><code class="docutils literal notranslate"><span class="pre">Grid.init_grid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.setup_params"><code class="docutils literal notranslate"><span class="pre">Grid.setup_params()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.setup"><code class="docutils literal notranslate"><span class="pre">Grid.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.add_category"><code class="docutils literal notranslate"><span class="pre">Grid.add_category()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_spot"><code class="docutils literal notranslate"><span class="pre">Grid.get_spot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_agent_ids"><code class="docutils literal notranslate"><span class="pre">Grid.get_agent_ids()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.coords_wrap"><code class="docutils literal notranslate"><span class="pre">Grid.coords_wrap()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_agent_neighborhood"><code class="docutils literal notranslate"><span class="pre">Grid.get_agent_neighborhood()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_spot_neighborhood"><code class="docutils literal notranslate"><span class="pre">Grid.get_spot_neighborhood()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.add_agent"><code class="docutils literal notranslate"><span class="pre">Grid.add_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.remove_agent"><code class="docutils literal notranslate"><span class="pre">Grid.remove_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.move_agent"><code class="docutils literal notranslate"><span class="pre">Grid.move_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_agent_pos"><code class="docutils literal notranslate"><span class="pre">Grid.get_agent_pos()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.height"><code class="docutils literal notranslate"><span class="pre">Grid.height()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.width"><code class="docutils literal notranslate"><span class="pre">Grid.width()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_neighbors"><code class="docutils literal notranslate"><span class="pre">Grid.get_neighbors()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_spot_agents"><code class="docutils literal notranslate"><span class="pre">Grid.get_spot_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_colormap"><code class="docutils literal notranslate"><span class="pre">Grid.get_colormap()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.spots_to_json"><code class="docutils literal notranslate"><span class="pre">Grid.spots_to_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_empty_spots"><code class="docutils literal notranslate"><span class="pre">Grid.get_empty_spots()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.find_empty_spot"><code class="docutils literal notranslate"><span class="pre">Grid.find_empty_spot()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.setup_agent_locations"><code class="docutils literal notranslate"><span class="pre">Grid.setup_agent_locations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.set_spot_property"><code class="docutils literal notranslate"><span class="pre">Grid.set_spot_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.rand_move_agent"><code class="docutils literal notranslate"><span class="pre">Grid.rand_move_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.get_agent_container"><code class="docutils literal notranslate"><span class="pre">Grid.get_agent_container()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Grid.agent_categories"><code class="docutils literal notranslate"><span class="pre">Grid.agent_categories</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/grid.html#Melodie.Spot"><code class="docutils literal notranslate"><span class="pre">Spot</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Spot.get_spot_agents"><code class="docutils literal notranslate"><span class="pre">Spot.get_spot_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/grid.html#Melodie.Spot.get_style"><code class="docutils literal notranslate"><span class="pre">Spot.get_style()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/network.html">Network &amp; Edge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/network.html#Melodie.Network"><code class="docutils literal notranslate"><span class="pre">Network</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.setup"><code class="docutils literal notranslate"><span class="pre">Network.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.add_edge"><code class="docutils literal notranslate"><span class="pre">Network.add_edge()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.get_edge"><code class="docutils literal notranslate"><span class="pre">Network.get_edge()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.remove_edge"><code class="docutils literal notranslate"><span class="pre">Network.remove_edge()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.get_neighbors"><code class="docutils literal notranslate"><span class="pre">Network.get_neighbors()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.remove_agent"><code class="docutils literal notranslate"><span class="pre">Network.remove_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.add_agent"><code class="docutils literal notranslate"><span class="pre">Network.add_agent()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.create_edge"><code class="docutils literal notranslate"><span class="pre">Network.create_edge()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.all_agents"><code class="docutils literal notranslate"><span class="pre">Network.all_agents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.get_node_edges"><code class="docutils literal notranslate"><span class="pre">Network.get_node_edges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.setup_layout_creator"><code class="docutils literal notranslate"><span class="pre">Network.setup_layout_creator()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.update_layout"><code class="docutils literal notranslate"><span class="pre">Network.update_layout()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.get_position"><code class="docutils literal notranslate"><span class="pre">Network.get_position()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Network.setup_agent_connections"><code class="docutils literal notranslate"><span class="pre">Network.setup_agent_connections()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/network.html#Melodie.Edge"><code class="docutils literal notranslate"><span class="pre">Edge</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Edge.setup"><code class="docutils literal notranslate"><span class="pre">Edge.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/network.html#Melodie.Edge.post_setup"><code class="docutils literal notranslate"><span class="pre">Edge.post_setup()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/calibrator.html">Calibrator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator"><code class="docutils literal notranslate"><span class="pre">Calibrator</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.setup"><code class="docutils literal notranslate"><span class="pre">Calibrator.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.collect_data"><code class="docutils literal notranslate"><span class="pre">Calibrator.collect_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.generate_scenarios"><code class="docutils literal notranslate"><span class="pre">Calibrator.generate_scenarios()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.get_params_scenarios"><code class="docutils literal notranslate"><span class="pre">Calibrator.get_params_scenarios()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.run"><code class="docutils literal notranslate"><span class="pre">Calibrator.run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.run_once_new"><code class="docutils literal notranslate"><span class="pre">Calibrator.run_once_new()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.target_function"><code class="docutils literal notranslate"><span class="pre">Calibrator.target_function()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.distance"><code class="docutils literal notranslate"><span class="pre">Calibrator.distance()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.add_scenario_calibrating_property"><code class="docutils literal notranslate"><span class="pre">Calibrator.add_scenario_calibrating_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/calibrator.html#Melodie.Calibrator.add_environment_property"><code class="docutils literal notranslate"><span class="pre">Calibrator.add_environment_property()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/trainer.html">Trainer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/trainer.html#Melodie.Trainer"><code class="docutils literal notranslate"><span class="pre">Trainer</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.add_agent_training_property"><code class="docutils literal notranslate"><span class="pre">Trainer.add_agent_training_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.setup"><code class="docutils literal notranslate"><span class="pre">Trainer.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.get_trainer_scenario_cls"><code class="docutils literal notranslate"><span class="pre">Trainer.get_trainer_scenario_cls()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.collect_data"><code class="docutils literal notranslate"><span class="pre">Trainer.collect_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.run"><code class="docutils literal notranslate"><span class="pre">Trainer.run()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.run_once_new"><code class="docutils literal notranslate"><span class="pre">Trainer.run_once_new()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.utility"><code class="docutils literal notranslate"><span class="pre">Trainer.utility()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.target_function"><code class="docutils literal notranslate"><span class="pre">Trainer.target_function()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.add_agent_property"><code class="docutils literal notranslate"><span class="pre">Trainer.add_agent_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.add_environment_property"><code class="docutils literal notranslate"><span class="pre">Trainer.add_environment_property()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.generate_scenarios"><code class="docutils literal notranslate"><span class="pre">Trainer.generate_scenarios()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/trainer.html#Melodie.Trainer.generate_trainer_params_list"><code class="docutils literal notranslate"><span class="pre">Trainer.generate_trainer_params_list()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribution.html">Contribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribution.html#reporting-issues">Reporting Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribution.html#contributing-code">Contributing Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribution.html#adding-to-the-model-gallery">Adding to the Model Gallery</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#major-version-0-x">Major Version 0.x</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-1-1-0-dec-10-2025">Version 1.1.0 (Dec. 10, 2025)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-1-0-0-mar-14-2024">Version 1.0.0 (Mar. 14, 2024)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-8-0-may-10-2023">Version 0.8.0 (May. 10, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-7-0-mar-25-2023">Version 0.7.0 (Mar. 25, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-6-0-jan-04-2023">Version 0.6.0 (Jan. 04, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-5-0-dec-17-2022">Version 0.5.0 (Dec. 17, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-4-2-dec-15-2022">Version 0.4.2 (Dec. 15, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-4-1-dec-12-2022">Version 0.4.1 (Dec. 12, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-4-0-nov-15-2022">Version 0.4.0 (Nov. 15, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-3-0-oct-28-2022">Version 0.3.0 (Oct. 28, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-2-0-oct-24-2022">Version 0.2.0 (Oct. 24, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-1-1-aug-23-2022">Version 0.1.1 (Aug. 23, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#version-0-1-0-jul-22-2022">Version 0.1.0 (Jul. 22, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#project-start-may-10-2021">Project Start (May. 10, 2021)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Melodie</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading"></a></h1>
<p>This tutorial uses the <strong>covid_contagion</strong> minimal example to demonstrate the Melodie
architecture. The code is kept simple but covers all core components. The project
structure is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>examples/covid_contagion
 core
    agent.py
    environment.py
    model.py
    scenario.py
    data_collector.py
 data
    input
       SimulatorScenarios.csv
       ID_HealthState.csv
    output
        Result_Simulator_Agents.csv
        Result_Simulator_Environment.csv
 main.py
 README.md
</pre></div>
</div>
<p>Conceptually, Melodie encourages <strong>separation of concerns</strong> in an ABM. In this example, the main components are:</p>
<ul class="simple">
<li><p><em>Model</em> (<code class="docutils literal notranslate"><span class="pre">core/model.py</span></code>) wires all components together and defines the main time loop.</p></li>
<li><p><em>Scenario</em> (<code class="docutils literal notranslate"><span class="pre">core/scenario.py</span></code>) is the single entry point for all model inputs. It loads all data from <code class="docutils literal notranslate"><span class="pre">data/input</span></code> (including <code class="docutils literal notranslate"><span class="pre">SimulatorScenarios</span></code>), and other components access this data via <code class="docutils literal notranslate"><span class="pre">self.scenario.xxx</span></code>.</p></li>
<li><p><em>Environment</em> (<code class="docutils literal notranslate"><span class="pre">core/environment.py</span></code>) implements the models macro-level logic. It coordinates agent interactions and calculates population-level statistics.</p></li>
<li><p><em>Agents</em> (<code class="docutils literal notranslate"><span class="pre">core/agent.py</span></code>) implement the models micro-level logic. They only know their own state and how to update it based on scenario parameters or environment instructions.</p></li>
<li><p><em>DataCollector</em> (<code class="docutils literal notranslate"><span class="pre">core/data_collector.py</span></code>) specifies what data to record from agents and the environment, and saves it to <code class="docutils literal notranslate"><span class="pre">data/output</span></code>.</p></li>
</ul>
<p>The <strong>covid_contagion</strong> example is deliberately simple to make this architecture clear. It contains one type of agent, one environment, one model, and one scenario table.</p>
<section id="model">
<h2>Model<a class="headerlink" href="#model" title="Link to this heading"></a></h2>
<p>The Model creates components, drives the simulation steps, and collects outputs. It orchestrates the simulation but does <strong>not</strong> contain domain-specific logic itselfthat belongs in the Agent and Environment classes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">Model</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidAgent</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">.environment</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidEnvironment</span>
<span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">.data_collector</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidDataCollector</span>
<span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">.scenario</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidScenario</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
<span class="linenos">10</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentList</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="k">class</span><span class="w"> </span><span class="nc">CovidModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
<span class="linenos">14</span>    <span class="n">scenario</span><span class="p">:</span> <span class="s2">&quot;CovidScenario&quot;</span>
<span class="linenos">15</span>    <span class="n">agents</span><span class="p">:</span> <span class="s2">&quot;AgentList[CovidAgent]&quot;</span>
<span class="linenos">16</span>    <span class="n">environment</span><span class="p">:</span> <span class="n">CovidEnvironment</span>
<span class="linenos">17</span>    <span class="n">data_collector</span><span class="p">:</span> <span class="n">CovidDataCollector</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">20</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">21</span><span class="sd">        This method is called once at the beginning of the simulation</span>
<span class="linenos">22</span><span class="sd">        to create the core components of the model.</span>
<span class="linenos">23</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">24</span>        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_agent_list</span><span class="p">(</span><span class="n">CovidAgent</span><span class="p">)</span>
<span class="linenos">25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_environment</span><span class="p">(</span><span class="n">CovidEnvironment</span><span class="p">)</span>
<span class="linenos">26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_collector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_data_collector</span><span class="p">(</span><span class="n">CovidDataCollector</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">29</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">30</span><span class="sd">        This method is called once after `create` to set up the initial state</span>
<span class="linenos">31</span><span class="sd">        of the model components.</span>
<span class="linenos">32</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">33</span>        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="o">.</span><span class="n">setup_agents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">agent_num</span><span class="p">)</span>
<span class="linenos">34</span>        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">setup_infection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">37</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">38</span><span class="sd">        This method defines the main simulation loop that runs for `scenario.period_num` periods.</span>
<span class="linenos">39</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">40</span>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">period_num</span><span class="p">):</span>
<span class="linenos">41</span>            <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">agents_interaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">)</span>
<span class="linenos">42</span>            <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">agents_recover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">)</span>
<span class="linenos">43</span>            <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">update_population_stats</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">)</span>
<span class="linenos">44</span>            <span class="bp">self</span><span class="o">.</span><span class="n">data_collector</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="linenos">45</span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_collector</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">create</span></code>: Builds the AgentList, Environment, and DataCollector.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup</span></code>: Initializes agents and sets up the initial infection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span></code>: Executes the main simulation loop, calling the environment for agent interaction and recovery, and then saving the results.</p></li>
</ul>
<p>Think of the Model as the <strong>orchestrator of components</strong>: it decides <em>what components exist</em>, in <em>what order</em> they are called each period, and delegates the concrete simulation logic to them. This allows you to reuse Agent and Environment classes in different experimental setups by only changing the <code class="docutils literal notranslate"><span class="pre">run</span></code> logic in the Model.</p>
</section>
<section id="scenario-definition">
<h2>Scenario Definition<a class="headerlink" href="#scenario-definition" title="Link to this heading"></a></h2>
<p>The Scenario defines parameters and loads static data tables. It acts as the single source of truth for all configuration and input data, allowing the other components to focus on behavior rather than I/O.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">Scenario</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">class</span><span class="w"> </span><span class="nc">CovidScenario</span><span class="p">(</span><span class="n">Scenario</span><span class="p">):</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="sd">    Defines the parameters for each simulation run of the virus contagion model.</span>
<span class="linenos"> 7</span><span class="sd">    It inherits from the base `Melodie.Scenario`.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="sd">    Special Melodie attributes (automatically populated from `SimulatorScenarios`):</span>
<span class="linenos">10</span><span class="sd">    - `id`: A unique identifier for the scenario.</span>
<span class="linenos">11</span><span class="sd">    - `run_num`: How many times to repeat this scenario (for stochastic models). Defaults to 1.</span>
<span class="linenos">12</span><span class="sd">    - `period_num`: How many simulation steps (periods) for each run. Defaults to 0.</span>
<span class="linenos">13</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">16</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">17</span><span class="sd">        Declares custom scenario parameters for type hinting and clarity.</span>
<span class="linenos">18</span><span class="sd">        These are automatically populated from columns in `SimulatorScenarios`.</span>
<span class="linenos">19</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">20</span>        <span class="bp">self</span><span class="o">.</span><span class="n">agent_num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">21</span>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_infected_percentage</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">22</span>        <span class="bp">self</span><span class="o">.</span><span class="n">infection_prob</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">23</span>        <span class="bp">self</span><span class="o">.</span><span class="n">recovery_prob</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="k">def</span><span class="w"> </span><span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">26</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="sd">        This method is automatically called by Melodie after scenario parameters are set.</span>
<span class="linenos">28</span><span class="sd">        It is the recommended place to load all static input dataframes, making them</span>
<span class="linenos">29</span><span class="sd">        accessible via `self.scenario.*` from `Model`, `Agent`, and `Environment`.</span>
<span class="linenos">30</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">31</span>        <span class="bp">self</span><span class="o">.</span><span class="n">health_states</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_dataframe</span><span class="p">(</span><span class="s2">&quot;ID_HealthState.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Some column names in <code class="docutils literal notranslate"><span class="pre">SimulatorScenarios</span></code> have a special meaning in Melodie:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: A unique identifier for the scenario, used in output files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_num</span></code>: How many times to repeat the same scenario. This is useful for analyzing stochastic models to observe the variability of outcomes. Defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code> if omitted.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">period_num</span></code>: How many periods the model will run. Defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code> if omitted (the simulation loop will not execute).</p></li>
</ul>
<p>These special attributes are defined in the base <code class="docutils literal notranslate"><span class="pre">Melodie.Scenario</span></code> class. They are typically controlled by adding corresponding columns to <code class="docutils literal notranslate"><span class="pre">SimulatorScenarios</span></code>, but you do not need to redeclare them in your subclasss <code class="docutils literal notranslate"><span class="pre">setup</span></code> method unless you want explicit type hints. Other columns are user-defined.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">load_data</span></code> method is a special hook that is automatically called by Melodie, so you should not change its name. It runs after parameters are loaded from the current <code class="docutils literal notranslate"><span class="pre">SimulatorScenarios</span></code> row. Inside <code class="docutils literal notranslate"><span class="pre">load_data</span></code>, you can load any other required data tables and attach them as attributes to the scenario instance. All other components (Model, Agent, Environment) can then access this data uniformly via <code class="docutils literal notranslate"><span class="pre">self.scenario.xxx</span></code>. For data-heavy models, you can also pre-process large tables in <code class="docutils literal notranslate"><span class="pre">load_data</span></code> (e.g., into dictionaries) to improve performance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Melodie automatically loads several standard scenario tables by recognizing
their filenames. These tables are essential for the <code class="docutils literal notranslate"><span class="pre">Simulator</span></code>,
<code class="docutils literal notranslate"><span class="pre">Trainer</span></code>, and <code class="docutils literal notranslate"><span class="pre">Calibrator</span></code> to function correctly. The recognized names
are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SimulatorScenarios</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CalibratorScenarios</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CalibratorParamsScenarios</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrainerScenarios</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TrainerParamsScenarios</span></code></p></li>
</ul>
<p>These files are automatically loaded and attached to each <code class="docutils literal notranslate"><span class="pre">Scenario</span></code>
object, becoming accessible via attributes like
<code class="docutils literal notranslate"><span class="pre">self.scenario.simulator_scenarios</span></code> or
<code class="docutils literal notranslate"><span class="pre">self.scenario.calibrator_params_scenarios</span></code>. You do not need to load
them manually in <code class="docutils literal notranslate"><span class="pre">load_data</span></code>.</p>
</div>
</section>
<section id="environment-logic">
<h2>Environment Logic<a class="headerlink" href="#environment-logic" title="Link to this heading"></a></h2>
<p>The Environment coordinates interactions, the initial infection, and recovery. It acts as the director that arranges agent interactions and maintains macro-level summaries.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">Environment</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">.agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidAgent</span>
<span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">.scenario</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidScenario</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
<span class="linenos"> 9</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentList</span>
<span class="linenos">10</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="k">class</span><span class="w"> </span><span class="nc">CovidEnvironment</span><span class="p">(</span><span class="n">Environment</span><span class="p">):</span>
<span class="linenos">13</span>    <span class="n">scenario</span><span class="p">:</span> <span class="s2">&quot;CovidScenario&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="c1"># Macro-level counters for population statistics.</span>
<span class="linenos">17</span>        <span class="c1"># These are updated each period by `update_population_stats` and recorded by the DataCollector.</span>
<span class="linenos">18</span>        <span class="bp">self</span><span class="o">.</span><span class="n">num_susceptible</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">19</span>        <span class="bp">self</span><span class="o">.</span><span class="n">num_infected</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">20</span>        <span class="bp">self</span><span class="o">.</span><span class="n">num_recovered</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">21</span>
<span class="linenos">22</span>    <span class="k">def</span><span class="w"> </span><span class="nf">setup_infection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="s2">&quot;AgentList[CovidAgent]&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">23</span>        <span class="c1"># Sets the initial percentage of infected agents based on scenario parameters.</span>
<span class="linenos">24</span>        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
<span class="linenos">25</span>            <span class="k">if</span> <span class="p">(</span>
<span class="linenos">26</span>                <span class="n">agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">0</span>
<span class="linenos">27</span>                <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">initial_infected_percentage</span>
<span class="linenos">28</span>            <span class="p">):</span>
<span class="linenos">29</span>                <span class="n">agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">30</span>
<span class="linenos">31</span>    <span class="k">def</span><span class="w"> </span><span class="nf">agents_interaction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="s2">&quot;AgentList[CovidAgent]&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">32</span>        <span class="c1"># Simulates random interactions where infected agents can spread the virus.</span>
<span class="linenos">33</span>        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
<span class="linenos">34</span>            <span class="k">if</span> <span class="n">agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">35</span>                <span class="c1"># Randomly meet another agent</span>
<span class="linenos">36</span>                <span class="c1"># Note: Melodie&#39;s AgentList.random_sample returns a list</span>
<span class="linenos">37</span>                <span class="n">other_agent</span> <span class="o">=</span> <span class="n">agents</span><span class="o">.</span><span class="n">random_sample</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">38</span>                <span class="k">if</span> <span class="n">other_agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">39</span>                    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">infection_prob</span><span class="p">:</span>
<span class="linenos">40</span>                        <span class="n">other_agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">41</span>    
<span class="linenos">42</span>    <span class="k">def</span><span class="w"> </span><span class="nf">agents_recover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="s2">&quot;AgentList[CovidAgent]&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">43</span>        <span class="c1"># Triggers the recovery process for all infected agents.</span>
<span class="linenos">44</span>        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
<span class="linenos">45</span>            <span class="n">agent</span><span class="o">.</span><span class="n">health_state_update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">recovery_prob</span><span class="p">)</span>
<span class="linenos">46</span>
<span class="linenos">47</span>    <span class="k">def</span><span class="w"> </span><span class="nf">update_population_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="s2">&quot;AgentList[CovidAgent]&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">48</span>        <span class="c1"># Aggregates agent states into environment-level population counts.</span>
<span class="linenos">49</span>        <span class="bp">self</span><span class="o">.</span><span class="n">num_susceptible</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">50</span>        <span class="bp">self</span><span class="o">.</span><span class="n">num_infected</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">51</span>        <span class="bp">self</span><span class="o">.</span><span class="n">num_recovered</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">52</span>
<span class="linenos">53</span>        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
<span class="linenos">54</span>            <span class="k">if</span> <span class="n">agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">55</span>                <span class="bp">self</span><span class="o">.</span><span class="n">num_susceptible</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">56</span>            <span class="k">elif</span> <span class="n">agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">57</span>                <span class="bp">self</span><span class="o">.</span><span class="n">num_infected</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">58</span>            <span class="k">elif</span> <span class="n">agent</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<span class="linenos">59</span>                <span class="bp">self</span><span class="o">.</span><span class="n">num_recovered</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setup_infection</span></code>: Sets the initial number of infected agents via a Bernoulli trial for each susceptible agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agents_interaction</span></code>: A simple mean-field interaction where each infected agent randomly meets one other agent and may spread the virus.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agents_recover</span></code>: Delegates the recovery logic to each agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update_population_stats</span></code>: Aggregates micro-level agent states into macro-level population counts.</p></li>
</ul>
</section>
<section id="agent-behavior">
<h2>Agent Behavior<a class="headerlink" href="#agent-behavior" title="Link to this heading"></a></h2>
<p>The Agent defines micro-level state and behavior. Agents in Melodie are deliberately lightweight: they only store their own state and expose methods for state transitions. The Environment decides <em>when</em> these methods are called.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">class</span><span class="w"> </span><span class="nc">CovidAgent</span><span class="p">(</span><span class="n">Agent</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 7</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="sd">        Initializes the agent&#39;s state.</span>
<span class="linenos"> 9</span><span class="sd">        `health_state`: 0 = susceptible, 1 = infected, 2 = recovered.</span>
<span class="linenos">10</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">11</span>        <span class="bp">self</span><span class="o">.</span><span class="n">health_state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># All agents start as susceptible.</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="k">def</span><span class="w"> </span><span class="nf">health_state_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recovery_prob</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">14</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">15</span><span class="sd">        Agent-level logic for transitioning from infected to recovered.</span>
<span class="linenos">16</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">17</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">health_state</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">recovery_prob</span><span class="p">:</span>
<span class="linenos">18</span>            <span class="bp">self</span><span class="o">.</span><span class="n">health_state</span> <span class="o">=</span> <span class="mi">2</span>
<span class="linenos">19</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p>State: <code class="docutils literal notranslate"><span class="pre">health_state</span></code> (0: susceptible, 1: infected, 2: recovered).</p></li>
<li><p>Method: <code class="docutils literal notranslate"><span class="pre">health_state_update</span></code> contains the logic for an agent to recover from infection.</p></li>
</ul>
<p>This smart environment, simple agents pattern is a core design principle in Melodie. It keeps agent classes simple and testable, centralizes interaction logic in the Environment, and makes it easier to modify interaction rules (e.g., from random-mixing to a grid-based model) without changing agent code.</p>
</section>
<section id="data-collection-setup">
<h2>Data Collection Setup<a class="headerlink" href="#data-collection-setup" title="Link to this heading"></a></h2>
<p>The Data Collector specifies which micro and macro results to save to <code class="docutils literal notranslate"><span class="pre">data/output</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataCollector</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">class</span><span class="w"> </span><span class="nc">CovidDataCollector</span><span class="p">(</span><span class="n">DataCollector</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 6</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 7</span><span class="sd">        Registers which properties of agents and the environment should be recorded.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="sd">        In this minimal example we record:</span>
<span class="linenos">10</span><span class="sd">        - micro-level results: each agent&#39;s ``health_state``;</span>
<span class="linenos">11</span><span class="sd">        - macro-level results: population counts on the environment</span>
<span class="linenos">12</span><span class="sd">          (``num_susceptible``, ``num_infected``, ``num_recovered``).</span>
<span class="linenos">13</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">14</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_agent_property</span><span class="p">(</span><span class="s2">&quot;agents&quot;</span><span class="p">,</span> <span class="s2">&quot;health_state&quot;</span><span class="p">)</span>
<span class="linenos">15</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_environment_property</span><span class="p">(</span><span class="s2">&quot;num_susceptible&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_environment_property</span><span class="p">(</span><span class="s2">&quot;num_infected&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_environment_property</span><span class="p">(</span><span class="s2">&quot;num_recovered&quot;</span><span class="p">)</span>
<span class="linenos">18</span>
</pre></div>
</div>
<p>The key design idea is that <strong>data collection is explicit</strong>: you register exactly which properties to track, and Melodie handles the indexing by scenario, run, period, and agent ID in a consistent format. This separates the simulation logic from the data storage logic.</p>
</section>
<section id="run-the-model">
<h2>Run the model<a class="headerlink" href="#run-the-model" title="Link to this heading"></a></h2>
<p>To run the example from the repository root (after activating your virtual environment):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>examples/covid_contagion/main.py
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">main.py</span></code> file is the entry point that loads the configuration and starts the simulation. It mirrors how you would run any Melodie project from a script.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">Melodie</span><span class="w"> </span><span class="kn">import</span> <span class="n">Config</span><span class="p">,</span> <span class="n">Simulator</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">examples.covid_contagion.core.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidModel</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">examples.covid_contagion.core.scenario</span><span class="w"> </span><span class="kn">import</span> <span class="n">CovidScenario</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos"> 7</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span>
<span class="linenos"> 8</span>        <span class="n">project_name</span><span class="o">=</span><span class="s2">&quot;covid_contagion&quot;</span><span class="p">,</span>
<span class="linenos"> 9</span>        <span class="n">project_root</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span>
<span class="linenos">10</span>        <span class="n">input_folder</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
<span class="linenos">11</span>            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span>
<span class="linenos">12</span>        <span class="p">),</span>
<span class="linenos">13</span>        <span class="n">output_folder</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
<span class="linenos">14</span>            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span>
<span class="linenos">15</span>        <span class="p">),</span>
<span class="linenos">16</span>    <span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="n">simulator</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span>
<span class="linenos">19</span>        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
<span class="linenos">20</span>        <span class="n">model_cls</span><span class="o">=</span><span class="n">CovidModel</span><span class="p">,</span>
<span class="linenos">21</span>        <span class="n">scenario_cls</span><span class="o">=</span><span class="n">CovidScenario</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="p">)</span>
<span class="linenos">23</span>    <span class="n">simulator</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="linenos">24</span>    <span class="c1"># simulator.run_parallel(cores=8)</span>
<span class="linenos">25</span>    <span class="c1"># simulator.run_parallel_multithread(cores=8)</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p>It is recommended to use absolute paths for input/output folders to avoid ambiguity.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Simulator</span></code> automatically finds the scenario table by its name, <code class="docutils literal notranslate"><span class="pre">SimulatorScenarios</span></code> (both <code class="docutils literal notranslate"><span class="pre">.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> are supported).</p></li>
<li><p>The <em>Config</em> object tells Melodie <strong>where</strong> data lives on disk.</p></li>
<li><p>The <em>Simulator</em> object knows <strong>how</strong> to iterate over scenarios and runs.</p></li>
</ul>
<p>When you start a simulation, the <code class="docutils literal notranslate"><span class="pre">Simulator</span></code> automatically calls a set of lifecycle methods on your components in a fixed order:</p>
<ul class="simple">
<li><p>On each <code class="docutils literal notranslate"><span class="pre">Scenario</span></code>: <code class="docutils literal notranslate"><span class="pre">setup()</span></code>, then <code class="docutils literal notranslate"><span class="pre">load_data()</span></code>, then <code class="docutils literal notranslate"><span class="pre">setup_data()</span></code> (if implemented).</p></li>
<li><p>On the <code class="docutils literal notranslate"><span class="pre">Model</span></code>: <code class="docutils literal notranslate"><span class="pre">create()</span></code>, then <code class="docutils literal notranslate"><span class="pre">setup()</span></code>, then <code class="docutils literal notranslate"><span class="pre">run()</span></code>.</p></li>
<li><p>On components like Environment, AgentList, and DataCollector: their respective <code class="docutils literal notranslate"><span class="pre">setup()</span></code> methods.</p></li>
</ul>
<p>This is why these method names are a fixed convention. You rarely call these methods directlythe <code class="docutils literal notranslate"><span class="pre">Simulator</span></code> manages the full execution loop for you.</p>
<p>After a run, the <code class="docutils literal notranslate"><span class="pre">data/output</span></code> folder will contain CSV files for analysis:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Result_Simulator_Agents.csv</span></code>: Per-period agent states.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Result_Simulator_Environment.csv</span></code>: Per-period environment aggregates (the macro metrics registered in the DataCollector).</p></li>
</ul>
</section>
<section id="parallel-execution">
<h2>Parallel Execution<a class="headerlink" href="#parallel-execution" title="Link to this heading"></a></h2>
<p>For large-scale experiments, running simulations sequentially can be time-consuming. Melodie provides two methods for parallel execution on multi-core machines, available on the <code class="docutils literal notranslate"><span class="pre">Simulator</span></code> object.</p>
<p><strong>1. ``run_parallel()``: Process-Based Parallelism</strong></p>
<p>This is the recommended and most robust method for parallelization in Melodie.</p>
<ul class="simple">
<li><p><strong>Mechanism</strong>: It uses Pythons <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> module to spawn multiple independent worker processes. Each worker runs a subset of the simulation scenarios/runs on a separate CPU core.</p></li>
<li><p><strong>Use Case</strong>: Ideal for any substantial simulation task. It scales well as it bypasses Pythons Global Interpreter Lock (GIL), allowing for true parallel computation on CPU-bound models.</p></li>
<li><p><strong>Usage</strong>:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In main.py, instead of simulator.run():</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">run_parallel</span><span class="p">(</span><span class="n">cores</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Use 4 CPU cores</span>
</pre></div>
</div>
<p><strong>2. ``run_parallel_multithread()``: Thread-Based Parallelism (Experimental)</strong></p>
<p>This method is an experimental feature designed to leverage modern Python versions (3.13+).</p>
<ul class="simple">
<li><p><strong>Mechanism</strong>: It uses a thread pool instead of a process pool. This avoids the overhead of creating new processes and serializing (pickling) data between them.</p></li>
<li><dl class="simple">
<dt><strong>Use Case</strong>:</dt><dd><ul>
<li><p><strong>Python 3.13+ (with free-threading mode)</strong>: This method can offer significant performance gains over <code class="docutils literal notranslate"><span class="pre">run_parallel()</span></code> by running threads on multiple cores without the GIL.</p></li>
<li><p><strong>Older Python Versions</strong>: It will run concurrently but will be limited by the GIL. For CPU-bound ABM simulations, it is unlikely to provide a speedup and may even be slower than a sequential run.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>Usage</strong>:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In main.py, for experiments on Python 3.13+</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">run_parallel_multithread</span><span class="p">(</span><span class="n">cores</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Performance Comparison: A Quick Case Study</strong></p>
<p>To demonstrate the difference, we ran the <code class="docutils literal notranslate"><span class="pre">covid_contagion</span></code> example with 24 scenarios (each with <code class="docutils literal notranslate"><span class="pre">run_num</span> <span class="pre">=</span> <span class="pre">1</span></code>) on a machine with a Python 3.11 environment and 8 cores.</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>`run_parallel(cores=8)`</strong>:</dt><dd><ul>
<li><p><strong>Total Time</strong>: ~0.90 seconds</p></li>
<li><p><strong>Mechanism</strong>: Spawns 8 separate Python processes. Each process has its own memory and GIL, allowing them to run computations on different cores simultaneously. This is highly effective for CPU-bound tasks like ABM.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>`run_parallel_multithread(cores=8)`</strong>:</dt><dd><ul>
<li><p><strong>Total Time</strong>: ~1.01 seconds</p></li>
<li><p><strong>Mechanism</strong>: Spawns 8 threads within a single Python process. In Python versions before 3.13, the GIL prevents these threads from executing Python code on more than one core at a time. The overhead of thread management can even make it slightly slower than the process-based approach.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Update: Test Results on Python 3.14.2 (Free-Threaded)</strong></p>
<p>With the official support for a free-threaded model (No-GIL) in Python 3.14+, the performance dynamic has shifted dramatically as predicted. We ran the same test on the same 8-core machine using Python 3.14.2:</p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>`run_parallel(cores=8)`</strong>:</dt><dd><ul>
<li><p><strong>Total Time</strong>: ~5.37 seconds</p></li>
<li><p><strong>Mechanism</strong>: Still effective, but the overhead of creating 8 separate processes and pickling data for communication is now more apparent compared to the lightweight thread-based alternative.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>`run_parallel_multithread(cores=8)`</strong>:</dt><dd><ul>
<li><p><strong>Total Time</strong>: ~1.56 seconds</p></li>
<li><p><strong>Mechanism</strong>: The 8 threads now run on 8 cores in true parallelism within a single process. By avoiding the overhead of process creation and data serialization, this method is now <strong>over 3.4x faster</strong> for this specific task.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Conclusion</strong>: For CPU-bound agent-based models, <code class="docutils literal notranslate"><span class="pre">run_parallel()</span></code> remains a robust choice for all Python versions. However, if you are using <strong>Python 3.14+</strong>, <code class="docutils literal notranslate"><span class="pre">run_parallel_multithread()</span></code> is now the <strong>highly recommended method</strong> for achieving superior performance on multi-core systems, thanks to the removal of the GIL.</p>
<p><strong>A Note on Performance Trade-offs</strong></p>
<p>An astute observer might notice that the absolute execution times on Python 3.14.2 for <em>both</em> methods were slower than on Python 3.11. This is an expected trade-off. The Python 3.14+ interpreter is more complex to support features like free-threading, leading to a higher startup overhead for each process.</p>
<p>In our test, the simulation task for each scenario is very short (milliseconds). Consequently, the overhead of creating new Python processes for <code class="docutils literal notranslate"><span class="pre">run_parallel()</span></code> becomes a significant portion of the total time, causing its slowdown from ~0.9s to ~5.37s.</p>
<p>The key takeaway is not the absolute speed on this micro-task, but the <strong>relative speedup</strong>. The test clearly demonstrates that for Python 3.14+, <code class="docutils literal notranslate"><span class="pre">run_parallel_multithread()</span></code> effectively eliminates this high process-creation overhead, making it the superior architecture for computationally intensive models where the simulation time far outweighs the initial setup time.</p>
<p><strong>A Note on Paths and Parallel Execution</strong></p>
<p>You may have noticed that some examples in the <cite>examples/</cite> directory require special handling to run in parallel, such as being executed as a module (e.g., <cite>python -m examples.covid_contagion.main</cite>) and having <cite>__init__.py</cite> files in their directories.</p>
<p>This is a specific consequence of these examples being <strong>nested inside a larger project structure</strong> (the Melodie repository itself). When <cite>run_parallel()</cite> creates new processes, those processes need to be able to import the models code (like <cite>core.model</cite>). The path manipulation ensures they can find the <cite>examples</cite> package from the projects root.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="framework_comparison.html" class="btn btn-neutral float-right" title="Framework Comparison" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2025, ABM4ALL.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>